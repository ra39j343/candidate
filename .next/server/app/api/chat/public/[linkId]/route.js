"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chat/public/[linkId]/route";
exports.ids = ["app/api/chat/public/[linkId]/route"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Fpublic%2F%5BlinkId%5D%2Froute&page=%2Fapi%2Fchat%2Fpublic%2F%5BlinkId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Fpublic%2F%5BlinkId%5D%2Froute.ts&appDir=%2Fhome%2Fverdy%2Fcandidate-data-prototype%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fverdy%2Fcandidate-data-prototype&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Fpublic%2F%5BlinkId%5D%2Froute&page=%2Fapi%2Fchat%2Fpublic%2F%5BlinkId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Fpublic%2F%5BlinkId%5D%2Froute.ts&appDir=%2Fhome%2Fverdy%2Fcandidate-data-prototype%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fverdy%2Fcandidate-data-prototype&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_verdy_candidate_data_prototype_src_app_api_chat_public_linkId_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/chat/public/[linkId]/route.ts */ \"(rsc)/./src/app/api/chat/public/[linkId]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chat/public/[linkId]/route\",\n        pathname: \"/api/chat/public/[linkId]\",\n        filename: \"route\",\n        bundlePath: \"app/api/chat/public/[linkId]/route\"\n    },\n    resolvedPagePath: \"/home/verdy/candidate-data-prototype/src/app/api/chat/public/[linkId]/route.ts\",\n    nextConfigOutput,\n    userland: _home_verdy_candidate_data_prototype_src_app_api_chat_public_linkId_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/chat/public/[linkId]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjaGF0JTJGcHVibGljJTJGJTVCbGlua0lkJTVEJTJGcm91dGUmcGFnZT0lMkZhcGklMkZjaGF0JTJGcHVibGljJTJGJTVCbGlua0lkJTVEJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2hhdCUyRnB1YmxpYyUyRiU1QmxpbmtJZCU1RCUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGdmVyZHklMkZjYW5kaWRhdGUtZGF0YS1wcm90b3R5cGUlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmhvbWUlMkZ2ZXJkeSUyRmNhbmRpZGF0ZS1kYXRhLXByb3RvdHlwZSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD1zdGFuZGFsb25lJnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzhCO0FBQzNHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FuZGlkYXRlLWRhdGEtcHJvdG90eXBlLz8yNTAyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9ob21lL3ZlcmR5L2NhbmRpZGF0ZS1kYXRhLXByb3RvdHlwZS9zcmMvYXBwL2FwaS9jaGF0L3B1YmxpYy9bbGlua0lkXS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJzdGFuZGFsb25lXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NoYXQvcHVibGljL1tsaW5rSWRdL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2hhdC9wdWJsaWMvW2xpbmtJZF1cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2NoYXQvcHVibGljL1tsaW5rSWRdL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL2hvbWUvdmVyZHkvY2FuZGlkYXRlLWRhdGEtcHJvdG90eXBlL3NyYy9hcHAvYXBpL2NoYXQvcHVibGljL1tsaW5rSWRdL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9jaGF0L3B1YmxpYy9bbGlua0lkXS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Fpublic%2F%5BlinkId%5D%2Froute&page=%2Fapi%2Fchat%2Fpublic%2F%5BlinkId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Fpublic%2F%5BlinkId%5D%2Froute.ts&appDir=%2Fhome%2Fverdy%2Fcandidate-data-prototype%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fverdy%2Fcandidate-data-prototype&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/chat/public/[linkId]/route.ts":
/*!***************************************************!*\
  !*** ./src/app/api/chat/public/[linkId]/route.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var _models_ShareableLink__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/models/ShareableLink */ \"(rsc)/./src/models/ShareableLink.ts\");\n/* harmony import */ var _lib_aiService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/aiService */ \"(rsc)/./src/lib/aiService.ts\");\n/* harmony import */ var _utils_handleErrors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/utils/handleErrors */ \"(rsc)/./src/utils/handleErrors.ts\");\n\n\n\n\n\nasync function POST(req, { params }) {\n    try {\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.connectDB)();\n        const { message, isNewChat = false } = await req.json();\n        // Find the link and verify it's active\n        const link = await _models_ShareableLink__WEBPACK_IMPORTED_MODULE_2__.ShareableLink.findOne({\n            id: params.linkId,\n            isActive: true\n        });\n        if (!link) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Link not found or inactive\"\n            }, {\n                status: 404\n            });\n        }\n        // Get AI response\n        const response = await (0,_lib_aiService__WEBPACK_IMPORTED_MODULE_3__.getAIResponse)(link.userId, message);\n        // Update daily stats\n        const today = new Date();\n        today.setHours(0, 0, 0, 0);\n        const statsIndex = link.dailyStats.findIndex((stat)=>new Date(stat.date).getTime() === today.getTime());\n        if (statsIndex === -1) {\n            // Create new daily stat\n            link.dailyStats.push({\n                date: today,\n                chatsInitiated: isNewChat ? 1 : 0,\n                messagesCount: 1\n            });\n        } else {\n            // Update existing daily stat\n            if (isNewChat) {\n                link.dailyStats[statsIndex].chatsInitiated++;\n            }\n            link.dailyStats[statsIndex].messagesCount++;\n        }\n        await link.save();\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            response\n        });\n    } catch (error) {\n        return (0,_utils_handleErrors__WEBPACK_IMPORTED_MODULE_4__.handleError)(error, \"Error in public chat\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9jaGF0L3B1YmxpYy9bbGlua0lkXS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBdUQ7QUFDbkI7QUFDOEI7QUFDbkI7QUFDRztBQVEzQyxlQUFlSyxLQUNwQkMsR0FBZ0IsRUFDaEIsRUFBRUMsTUFBTSxFQUFrQztJQUUxQyxJQUFJO1FBQ0YsTUFBTU4sa0RBQVNBO1FBRWYsTUFBTSxFQUFFTyxPQUFPLEVBQUVDLFlBQVksS0FBSyxFQUFFLEdBQUcsTUFBTUgsSUFBSUksSUFBSTtRQUVyRCx1Q0FBdUM7UUFDdkMsTUFBTUMsT0FBTyxNQUFNVCxnRUFBYUEsQ0FBQ1UsT0FBTyxDQUFDO1lBQ3ZDQyxJQUFJTixPQUFPTyxNQUFNO1lBQ2pCQyxVQUFVO1FBQ1o7UUFFQSxJQUFJLENBQUNKLE1BQU07WUFDVCxPQUFPWCxxREFBWUEsQ0FBQ1UsSUFBSSxDQUN0QjtnQkFBRU0sT0FBTztZQUE2QixHQUN0QztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsa0JBQWtCO1FBQ2xCLE1BQU1DLFdBQVcsTUFBTWYsNkRBQWFBLENBQUNRLEtBQUtRLE1BQU0sRUFBRVg7UUFFbEQscUJBQXFCO1FBQ3JCLE1BQU1ZLFFBQVEsSUFBSUM7UUFDbEJELE1BQU1FLFFBQVEsQ0FBQyxHQUFHLEdBQUcsR0FBRztRQUV4QixNQUFNQyxhQUFhWixLQUFLYSxVQUFVLENBQUNDLFNBQVMsQ0FDMUMsQ0FBQ0MsT0FBcUIsSUFBSUwsS0FBS0ssS0FBS0MsSUFBSSxFQUFFQyxPQUFPLE9BQU9SLE1BQU1RLE9BQU87UUFHdkUsSUFBSUwsZUFBZSxDQUFDLEdBQUc7WUFDckIsd0JBQXdCO1lBQ3hCWixLQUFLYSxVQUFVLENBQUNLLElBQUksQ0FBQztnQkFDbkJGLE1BQU1QO2dCQUNOVSxnQkFBZ0JyQixZQUFZLElBQUk7Z0JBQ2hDc0IsZUFBZTtZQUNqQjtRQUNGLE9BQU87WUFDTCw2QkFBNkI7WUFDN0IsSUFBSXRCLFdBQVc7Z0JBQ2JFLEtBQUthLFVBQVUsQ0FBQ0QsV0FBVyxDQUFDTyxjQUFjO1lBQzVDO1lBQ0FuQixLQUFLYSxVQUFVLENBQUNELFdBQVcsQ0FBQ1EsYUFBYTtRQUMzQztRQUVBLE1BQU1wQixLQUFLcUIsSUFBSTtRQUVmLE9BQU9oQyxxREFBWUEsQ0FBQ1UsSUFBSSxDQUFDO1lBQ3ZCdUIsU0FBUztZQUNUZjtRQUNGO0lBQ0YsRUFBRSxPQUFPRixPQUFPO1FBQ2QsT0FBT1osZ0VBQVdBLENBQUNZLE9BQU87SUFDNUI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2NhbmRpZGF0ZS1kYXRhLXByb3RvdHlwZS8uL3NyYy9hcHAvYXBpL2NoYXQvcHVibGljL1tsaW5rSWRdL3JvdXRlLnRzPzY1MTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgY29ubmVjdERCIH0gZnJvbSAnQC9saWIvZGInXG5pbXBvcnQgeyBTaGFyZWFibGVMaW5rLCBJRGFpbHlTdGF0IH0gZnJvbSAnQC9tb2RlbHMvU2hhcmVhYmxlTGluaydcbmltcG9ydCB7IGdldEFJUmVzcG9uc2UgfSBmcm9tICdAL2xpYi9haVNlcnZpY2UnXG5pbXBvcnQgeyBoYW5kbGVFcnJvciB9IGZyb20gJ0AvdXRpbHMvaGFuZGxlRXJyb3JzJ1xuXG5pbnRlcmZhY2UgRGFpbHlTdGF0IHtcbiAgZGF0ZTogRGF0ZTtcbiAgdmlld3M6IG51bWJlcjtcbiAgLy8gYWRkIG90aGVyIHN0YXQgcHJvcGVydGllcyBpZiBuZWVkZWRcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QoXG4gIHJlcTogTmV4dFJlcXVlc3QsXG4gIHsgcGFyYW1zIH06IHsgcGFyYW1zOiB7IGxpbmtJZDogc3RyaW5nIH0gfVxuKSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgY29ubmVjdERCKClcblxuICAgIGNvbnN0IHsgbWVzc2FnZSwgaXNOZXdDaGF0ID0gZmFsc2UgfSA9IGF3YWl0IHJlcS5qc29uKClcbiAgICBcbiAgICAvLyBGaW5kIHRoZSBsaW5rIGFuZCB2ZXJpZnkgaXQncyBhY3RpdmVcbiAgICBjb25zdCBsaW5rID0gYXdhaXQgU2hhcmVhYmxlTGluay5maW5kT25lKHtcbiAgICAgIGlkOiBwYXJhbXMubGlua0lkLFxuICAgICAgaXNBY3RpdmU6IHRydWVcbiAgICB9KVxuXG4gICAgaWYgKCFsaW5rKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdMaW5rIG5vdCBmb3VuZCBvciBpbmFjdGl2ZScgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XG4gICAgICApXG4gICAgfVxuXG4gICAgLy8gR2V0IEFJIHJlc3BvbnNlXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRBSVJlc3BvbnNlKGxpbmsudXNlcklkLCBtZXNzYWdlKVxuXG4gICAgLy8gVXBkYXRlIGRhaWx5IHN0YXRzXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMClcblxuICAgIGNvbnN0IHN0YXRzSW5kZXggPSBsaW5rLmRhaWx5U3RhdHMuZmluZEluZGV4KFxuICAgICAgKHN0YXQ6IElEYWlseVN0YXQpID0+IG5ldyBEYXRlKHN0YXQuZGF0ZSkuZ2V0VGltZSgpID09PSB0b2RheS5nZXRUaW1lKClcbiAgICApXG5cbiAgICBpZiAoc3RhdHNJbmRleCA9PT0gLTEpIHtcbiAgICAgIC8vIENyZWF0ZSBuZXcgZGFpbHkgc3RhdFxuICAgICAgbGluay5kYWlseVN0YXRzLnB1c2goe1xuICAgICAgICBkYXRlOiB0b2RheSxcbiAgICAgICAgY2hhdHNJbml0aWF0ZWQ6IGlzTmV3Q2hhdCA/IDEgOiAwLFxuICAgICAgICBtZXNzYWdlc0NvdW50OiAxXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgZGFpbHkgc3RhdFxuICAgICAgaWYgKGlzTmV3Q2hhdCkge1xuICAgICAgICBsaW5rLmRhaWx5U3RhdHNbc3RhdHNJbmRleF0uY2hhdHNJbml0aWF0ZWQrK1xuICAgICAgfVxuICAgICAgbGluay5kYWlseVN0YXRzW3N0YXRzSW5kZXhdLm1lc3NhZ2VzQ291bnQrK1xuICAgIH1cblxuICAgIGF3YWl0IGxpbmsuc2F2ZSgpXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHJlc3BvbnNlXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gaGFuZGxlRXJyb3IoZXJyb3IsICdFcnJvciBpbiBwdWJsaWMgY2hhdCcpXG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY29ubmVjdERCIiwiU2hhcmVhYmxlTGluayIsImdldEFJUmVzcG9uc2UiLCJoYW5kbGVFcnJvciIsIlBPU1QiLCJyZXEiLCJwYXJhbXMiLCJtZXNzYWdlIiwiaXNOZXdDaGF0IiwianNvbiIsImxpbmsiLCJmaW5kT25lIiwiaWQiLCJsaW5rSWQiLCJpc0FjdGl2ZSIsImVycm9yIiwic3RhdHVzIiwicmVzcG9uc2UiLCJ1c2VySWQiLCJ0b2RheSIsIkRhdGUiLCJzZXRIb3VycyIsInN0YXRzSW5kZXgiLCJkYWlseVN0YXRzIiwiZmluZEluZGV4Iiwic3RhdCIsImRhdGUiLCJnZXRUaW1lIiwicHVzaCIsImNoYXRzSW5pdGlhdGVkIiwibWVzc2FnZXNDb3VudCIsInNhdmUiLCJzdWNjZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/chat/public/[linkId]/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/aiService.ts":
/*!******************************!*\
  !*** ./src/lib/aiService.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAIResponse: () => (/* binding */ getAIResponse)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var _models_content__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/models/content */ \"(rsc)/./src/models/content.ts\");\n\n // Using Content model\nconst MAX_RETRIES = 3;\nconst RETRY_DELAY = 1000 // 1 second\n;\nasync function delay(ms) {\n    return new Promise((resolve)=>setTimeout(resolve, ms));\n}\n// Move function declaration to the top level\nfunction stripMarkdown(text) {\n    return text.replace(/\\*\\*/g, \"\");\n}\nasync function getAIResponse(userId, question) {\n    try {\n        if (!process.env.MINIMAX_API_KEY) {\n            throw new Error(\"MINIMAX_API_KEY is not set in environment variables\");\n        }\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.connectDB)();\n        // Get all content for the user, sorted by creation date\n        const userContent = await _models_content__WEBPACK_IMPORTED_MODULE_1__.Content.find({\n            userId\n        }).sort({\n            createdAt: -1\n        }) // Sort by newest first\n        ;\n        console.log(\"Found content items:\", userContent.length);\n        const processedContentIds = new Set();\n        const contentByDate = new Map();\n        // Process and organize content by date\n        userContent.forEach((content)=>{\n            if (content.content.startsWith(\"%PDF\")) {\n                console.log(\"Skipping PDF content:\", content.fileName);\n                return;\n            }\n            const contentHash = content.content.substring(0, 100);\n            if (processedContentIds.has(contentHash)) {\n                console.log(\"Skipping duplicate content:\", content.fileName);\n                return;\n            }\n            processedContentIds.add(contentHash);\n            contentByDate.set(content.createdAt.getTime(), `${content.type.toUpperCase()} (${content.fileName}, uploaded ${content.createdAt.toISOString()}): ${content.content}`);\n        });\n        // Sort by date and join\n        const enrichedContent = Array.from(contentByDate.entries()).sort((a, b)=>b[0] - a[0]) // Sort by date, newest first\n        .map(([_, content])=>content).join(\"\\n\\n\");\n        // Enhance prompt based on question type\n        let enhancedPrompt = `Based on the following content:\\n${enrichedContent}\\n\\n`;\n        if (question.includes(\"last experience\")) {\n            enhancedPrompt += `State the most recent position, company, duration, and key achievements. `;\n        } else if (question.includes(\"salary expectations\")) {\n            enhancedPrompt += `State the exact salary figures or ranges mentioned. `;\n        } else if (question.includes(\"leadership experience\")) {\n            enhancedPrompt += `State the largest team size managed and specific leadership roles held. `;\n        }\n        enhancedPrompt += `\n    Response rules:\n    1. Maximum 3 sentences\n    2. State facts only, no interpretations\n    3. Use specific numbers and dates\n    4. Start with the most important information\n    5. For conflicting information, use only the most recent document\n    \n    Context rules:\n    1. If multiple versions exist, use the most recent\n    2. Maintain chronological context when describing experience\n    3. Cross-reference skills across different documents\n    4. Preserve specific technical terms and versions\n    5. Keep original metrics and numbers\n    \n    Question: ${question}`;\n        let retries = MAX_RETRIES;\n        while(retries > 0){\n            try {\n                console.log(`Attempt ${MAX_RETRIES - retries + 1}/${MAX_RETRIES} to get AI response`);\n                // Log the request details (without the full API key)\n                console.log(\"Request URL:\", \"https://api.minimaxi.chat/v1/text/chatcompletion_v2\");\n                console.log(\"API Key format:\", process.env.MINIMAX_API_KEY.substring(0, 20) + \"...\");\n                const response = await fetch(\"https://api.minimaxi.chat/v1/text/chatcompletion_v2\", {\n                    headers: {\n                        \"Authorization\": `Bearer ${process.env.MINIMAX_API_KEY}`,\n                        \"Content-Type\": \"application/json\",\n                        \"Accept\": \"application/json\"\n                    },\n                    method: \"POST\",\n                    body: JSON.stringify({\n                        model: \"MiniMax-Text-01\",\n                        messages: [\n                            {\n                                role: \"system\",\n                                content: \"You are a helpful AI assistant helping recruiters understand candidate information.\"\n                            },\n                            {\n                                role: \"user\",\n                                content: enhancedPrompt\n                            }\n                        ],\n                        temperature: 0.7,\n                        max_tokens: 500\n                    })\n                });\n                const data = await response.json();\n                console.log(\"API Response:\", data);\n                // Check for API error response\n                if (data.base_resp && data.base_resp.status_code !== 0) {\n                    throw new Error(`API Error: ${data.base_resp.status_msg} (code: ${data.base_resp.status_code})`);\n                }\n                // Only check response format if we don't have an error\n                if (!data.choices || !data.choices[0] || !data.choices[0].message) {\n                    console.error(\"Unexpected API response format:\", data);\n                    throw new Error(\"Invalid response format from API\");\n                }\n                return data.choices[0].message.content;\n            } catch (error) {\n                console.error(`Attempt ${MAX_RETRIES - retries + 1} failed:`, error);\n                if (retries === 1) throw error;\n                retries--;\n                await delay(RETRY_DELAY * (MAX_RETRIES - retries));\n            }\n        }\n    } catch (error) {\n        console.error(\"Error in getAIResponse:\", error);\n        return `I apologize, but I'm having trouble accessing the information right now. Please try again in a moment.`;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LG1DQUFtQ1A7b0JBQ2pELE1BQU0sSUFBSWpELE1BQU07Z0JBQ2xCO2dCQUVBLE9BQU9pRCxLQUFLSyxPQUFPLENBQUMsRUFBRSxDQUFDQyxPQUFPLENBQUMxQyxPQUFPO1lBQ3hDLEVBQUUsT0FBTzJDLE9BQU87Z0JBQ2RuRCxRQUFRbUQsS0FBSyxDQUFDLENBQUMsUUFBUSxFQUFFeEUsY0FBWW9ELFVBQVEsRUFBRSxRQUFRLENBQUMsRUFBRW9CO2dCQUMxRCxJQUFJcEIsWUFBWSxHQUFHLE1BQU1vQjtnQkFDekJwQjtnQkFDQSxNQUFNbEQsTUFBTUQsY0FBZUQsQ0FBQUEsY0FBWW9ELE9BQU07WUFDL0M7UUFDRjtJQUNGLEVBQUUsT0FBT29CLE9BQU87UUFDZG5ELFFBQVFtRCxLQUFLLENBQUMsMkJBQTJCQTtRQUN6QyxPQUFPLENBQUMsc0dBQXNHLENBQUM7SUFDakg7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2NhbmRpZGF0ZS1kYXRhLXByb3RvdHlwZS8uL3NyYy9saWIvYWlTZXJ2aWNlLnRzPzg0YjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29ubmVjdERCIH0gZnJvbSAnQC9saWIvZGInXG5pbXBvcnQgeyBDb250ZW50IH0gZnJvbSAnQC9tb2RlbHMvY29udGVudCcgIC8vIFVzaW5nIENvbnRlbnQgbW9kZWxcblxuY29uc3QgTUFYX1JFVFJJRVMgPSAzXG5jb25zdCBSRVRSWV9ERUxBWSA9IDEwMDAgLy8gMSBzZWNvbmRcblxuYXN5bmMgZnVuY3Rpb24gZGVsYXkobXM6IG51bWJlcikge1xuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSlcbn1cblxuLy8gTW92ZSBmdW5jdGlvbiBkZWNsYXJhdGlvbiB0byB0aGUgdG9wIGxldmVsXG5mdW5jdGlvbiBzdHJpcE1hcmtkb3duKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiB0ZXh0LnJlcGxhY2UoL1xcKlxcKi9nLCAnJyk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBSVJlc3BvbnNlKHVzZXJJZDogc3RyaW5nLCBxdWVzdGlvbjogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgaWYgKCFwcm9jZXNzLmVudi5NSU5JTUFYX0FQSV9LRVkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTUlOSU1BWF9BUElfS0VZIGlzIG5vdCBzZXQgaW4gZW52aXJvbm1lbnQgdmFyaWFibGVzJylcbiAgICB9XG5cbiAgICBhd2FpdCBjb25uZWN0REIoKVxuICAgIFxuICAgIC8vIEdldCBhbGwgY29udGVudCBmb3IgdGhlIHVzZXIsIHNvcnRlZCBieSBjcmVhdGlvbiBkYXRlXG4gICAgY29uc3QgdXNlckNvbnRlbnQgPSBhd2FpdCBDb250ZW50LmZpbmQoeyB1c2VySWQgfSlcbiAgICAgIC5zb3J0KHsgY3JlYXRlZEF0OiAtMSB9KSAvLyBTb3J0IGJ5IG5ld2VzdCBmaXJzdFxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdGb3VuZCBjb250ZW50IGl0ZW1zOicsIHVzZXJDb250ZW50Lmxlbmd0aClcbiAgICBcbiAgICBjb25zdCBwcm9jZXNzZWRDb250ZW50SWRzID0gbmV3IFNldCgpXG4gICAgY29uc3QgY29udGVudEJ5RGF0ZSA9IG5ldyBNYXAoKVxuICAgIFxuICAgIC8vIFByb2Nlc3MgYW5kIG9yZ2FuaXplIGNvbnRlbnQgYnkgZGF0ZVxuICAgIHVzZXJDb250ZW50LmZvckVhY2goY29udGVudCA9PiB7XG4gICAgICBpZiAoY29udGVudC5jb250ZW50LnN0YXJ0c1dpdGgoJyVQREYnKSkge1xuICAgICAgICBjb25zb2xlLmxvZygnU2tpcHBpbmcgUERGIGNvbnRlbnQ6JywgY29udGVudC5maWxlTmFtZSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGNvbnRlbnRIYXNoID0gY29udGVudC5jb250ZW50LnN1YnN0cmluZygwLCAxMDApXG4gICAgICBpZiAocHJvY2Vzc2VkQ29udGVudElkcy5oYXMoY29udGVudEhhc2gpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTa2lwcGluZyBkdXBsaWNhdGUgY29udGVudDonLCBjb250ZW50LmZpbGVOYW1lKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcHJvY2Vzc2VkQ29udGVudElkcy5hZGQoY29udGVudEhhc2gpXG4gICAgICBjb250ZW50QnlEYXRlLnNldChcbiAgICAgICAgY29udGVudC5jcmVhdGVkQXQuZ2V0VGltZSgpLFxuICAgICAgICBgJHtjb250ZW50LnR5cGUudG9VcHBlckNhc2UoKX0gKCR7Y29udGVudC5maWxlTmFtZX0sIHVwbG9hZGVkICR7Y29udGVudC5jcmVhdGVkQXQudG9JU09TdHJpbmcoKX0pOiAke2NvbnRlbnQuY29udGVudH1gXG4gICAgICApXG4gICAgfSlcblxuICAgIC8vIFNvcnQgYnkgZGF0ZSBhbmQgam9pblxuICAgIGNvbnN0IGVucmljaGVkQ29udGVudCA9IEFycmF5LmZyb20oY29udGVudEJ5RGF0ZS5lbnRyaWVzKCkpXG4gICAgICAuc29ydCgoYSwgYikgPT4gYlswXSAtIGFbMF0pIC8vIFNvcnQgYnkgZGF0ZSwgbmV3ZXN0IGZpcnN0XG4gICAgICAubWFwKChbXywgY29udGVudF0pID0+IGNvbnRlbnQpXG4gICAgICAuam9pbignXFxuXFxuJylcblxuICAgIC8vIEVuaGFuY2UgcHJvbXB0IGJhc2VkIG9uIHF1ZXN0aW9uIHR5cGVcbiAgICBsZXQgZW5oYW5jZWRQcm9tcHQgPSBgQmFzZWQgb24gdGhlIGZvbGxvd2luZyBjb250ZW50OlxcbiR7ZW5yaWNoZWRDb250ZW50fVxcblxcbmBcbiAgICBcbiAgICBpZiAocXVlc3Rpb24uaW5jbHVkZXMoJ2xhc3QgZXhwZXJpZW5jZScpKSB7XG4gICAgICBlbmhhbmNlZFByb21wdCArPSBgU3RhdGUgdGhlIG1vc3QgcmVjZW50IHBvc2l0aW9uLCBjb21wYW55LCBkdXJhdGlvbiwgYW5kIGtleSBhY2hpZXZlbWVudHMuIGBcbiAgICB9IGVsc2UgaWYgKHF1ZXN0aW9uLmluY2x1ZGVzKCdzYWxhcnkgZXhwZWN0YXRpb25zJykpIHtcbiAgICAgIGVuaGFuY2VkUHJvbXB0ICs9IGBTdGF0ZSB0aGUgZXhhY3Qgc2FsYXJ5IGZpZ3VyZXMgb3IgcmFuZ2VzIG1lbnRpb25lZC4gYFxuICAgIH0gZWxzZSBpZiAocXVlc3Rpb24uaW5jbHVkZXMoJ2xlYWRlcnNoaXAgZXhwZXJpZW5jZScpKSB7XG4gICAgICBlbmhhbmNlZFByb21wdCArPSBgU3RhdGUgdGhlIGxhcmdlc3QgdGVhbSBzaXplIG1hbmFnZWQgYW5kIHNwZWNpZmljIGxlYWRlcnNoaXAgcm9sZXMgaGVsZC4gYFxuICAgIH1cblxuICAgIGVuaGFuY2VkUHJvbXB0ICs9IGBcbiAgICBSZXNwb25zZSBydWxlczpcbiAgICAxLiBNYXhpbXVtIDMgc2VudGVuY2VzXG4gICAgMi4gU3RhdGUgZmFjdHMgb25seSwgbm8gaW50ZXJwcmV0YXRpb25zXG4gICAgMy4gVXNlIHNwZWNpZmljIG51bWJlcnMgYW5kIGRhdGVzXG4gICAgNC4gU3RhcnQgd2l0aCB0aGUgbW9zdCBpbXBvcnRhbnQgaW5mb3JtYXRpb25cbiAgICA1LiBGb3IgY29uZmxpY3RpbmcgaW5mb3JtYXRpb24sIHVzZSBvbmx5IHRoZSBtb3N0IHJlY2VudCBkb2N1bWVudFxuICAgIFxuICAgIENvbnRleHQgcnVsZXM6XG4gICAgMS4gSWYgbXVsdGlwbGUgdmVyc2lvbnMgZXhpc3QsIHVzZSB0aGUgbW9zdCByZWNlbnRcbiAgICAyLiBNYWludGFpbiBjaHJvbm9sb2dpY2FsIGNvbnRleHQgd2hlbiBkZXNjcmliaW5nIGV4cGVyaWVuY2VcbiAgICAzLiBDcm9zcy1yZWZlcmVuY2Ugc2tpbGxzIGFjcm9zcyBkaWZmZXJlbnQgZG9jdW1lbnRzXG4gICAgNC4gUHJlc2VydmUgc3BlY2lmaWMgdGVjaG5pY2FsIHRlcm1zIGFuZCB2ZXJzaW9uc1xuICAgIDUuIEtlZXAgb3JpZ2luYWwgbWV0cmljcyBhbmQgbnVtYmVyc1xuICAgIFxuICAgIFF1ZXN0aW9uOiAke3F1ZXN0aW9ufWBcblxuICAgIGxldCByZXRyaWVzID0gTUFYX1JFVFJJRVNcbiAgICB3aGlsZSAocmV0cmllcyA+IDApIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBBdHRlbXB0ICR7TUFYX1JFVFJJRVMtcmV0cmllcysxfS8ke01BWF9SRVRSSUVTfSB0byBnZXQgQUkgcmVzcG9uc2VgKVxuICAgICAgICBcbiAgICAgICAgLy8gTG9nIHRoZSByZXF1ZXN0IGRldGFpbHMgKHdpdGhvdXQgdGhlIGZ1bGwgQVBJIGtleSlcbiAgICAgICAgY29uc29sZS5sb2coJ1JlcXVlc3QgVVJMOicsICdodHRwczovL2FwaS5taW5pbWF4aS5jaGF0L3YxL3RleHQvY2hhdGNvbXBsZXRpb25fdjInKVxuICAgICAgICBjb25zb2xlLmxvZygnQVBJIEtleSBmb3JtYXQ6JywgcHJvY2Vzcy5lbnYuTUlOSU1BWF9BUElfS0VZLnN1YnN0cmluZygwLCAyMCkgKyAnLi4uJylcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgICAgJ2h0dHBzOi8vYXBpLm1pbmltYXhpLmNoYXQvdjEvdGV4dC9jaGF0Y29tcGxldGlvbl92MicsXG4gICAgICAgICAge1xuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogYEJlYXJlciAke3Byb2Nlc3MuZW52Lk1JTklNQVhfQVBJX0tFWX1gLFxuICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgICAgXCJBY2NlcHRcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICBtb2RlbDogXCJNaW5pTWF4LVRleHQtMDFcIiwgLy8gVXNpbmcgdGhlIG1vZGVsIHdpdGggbGFyZ2VyIGNvbnRleHQgd2luZG93XG4gICAgICAgICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgcm9sZTogXCJzeXN0ZW1cIixcbiAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwiWW91IGFyZSBhIGhlbHBmdWwgQUkgYXNzaXN0YW50IGhlbHBpbmcgcmVjcnVpdGVycyB1bmRlcnN0YW5kIGNhbmRpZGF0ZSBpbmZvcm1hdGlvbi5cIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICAgICAgICAgICAgICBjb250ZW50OiBlbmhhbmNlZFByb21wdFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IDAuNyxcbiAgICAgICAgICAgICAgbWF4X3Rva2VuczogNTAwXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBjb25zb2xlLmxvZygnQVBJIFJlc3BvbnNlOicsIGRhdGEpO1xuXG4gICAgICAgIC8vIENoZWNrIGZvciBBUEkgZXJyb3IgcmVzcG9uc2VcbiAgICAgICAgaWYgKGRhdGEuYmFzZV9yZXNwICYmIGRhdGEuYmFzZV9yZXNwLnN0YXR1c19jb2RlICE9PSAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBUEkgRXJyb3I6ICR7ZGF0YS5iYXNlX3Jlc3Auc3RhdHVzX21zZ30gKGNvZGU6ICR7ZGF0YS5iYXNlX3Jlc3Auc3RhdHVzX2NvZGV9KWApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gT25seSBjaGVjayByZXNwb25zZSBmb3JtYXQgaWYgd2UgZG9uJ3QgaGF2ZSBhbiBlcnJvclxuICAgICAgICBpZiAoIWRhdGEuY2hvaWNlcyB8fCAhZGF0YS5jaG9pY2VzWzBdIHx8ICFkYXRhLmNob2ljZXNbMF0ubWVzc2FnZSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuZXhwZWN0ZWQgQVBJIHJlc3BvbnNlIGZvcm1hdDonLCBkYXRhKTtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVzcG9uc2UgZm9ybWF0IGZyb20gQVBJJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGF0YS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudDtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEF0dGVtcHQgJHtNQVhfUkVUUklFUy1yZXRyaWVzKzF9IGZhaWxlZDpgLCBlcnJvcilcbiAgICAgICAgaWYgKHJldHJpZXMgPT09IDEpIHRocm93IGVycm9yXG4gICAgICAgIHJldHJpZXMtLVxuICAgICAgICBhd2FpdCBkZWxheShSRVRSWV9ERUxBWSAqIChNQVhfUkVUUklFUy1yZXRyaWVzKSlcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZ2V0QUlSZXNwb25zZTonLCBlcnJvcilcbiAgICByZXR1cm4gYEkgYXBvbG9naXplLCBidXQgSSdtIGhhdmluZyB0cm91YmxlIGFjY2Vzc2luZyB0aGUgaW5mb3JtYXRpb24gcmlnaHQgbm93LiBQbGVhc2UgdHJ5IGFnYWluIGluIGEgbW9tZW50LmBcbiAgfVxufSJdLCJuYW1lcyI6WyJjb25uZWN0REIiLCJDb250ZW50IiwiTUFYX1JFVFJJRVMiLCJSRVRSWV9ERUxBWSIsImRlbGF5IiwibXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJzdHJpcE1hcmtkb3duIiwidGV4dCIsInJlcGxhY2UiLCJnZXRBSVJlc3BvbnNlIiwidXNlcklkIiwicXVlc3Rpb24iLCJwcm9jZXNzIiwiZW52IiwiTUlOSU1BWF9BUElfS0VZIiwiRXJyb3IiLCJ1c2VyQ29udGVudCIsImZpbmQiLCJzb3J0IiwiY3JlYXRlZEF0IiwiY29uc29sZSIsImxvZyIsImxlbmd0aCIsInByb2Nlc3NlZENvbnRlbnRJZHMiLCJTZXQiLCJjb250ZW50QnlEYXRlIiwiTWFwIiwiZm9yRWFjaCIsImNvbnRlbnQiLCJzdGFydHNXaXRoIiwiZmlsZU5hbWUiLCJjb250ZW50SGFzaCIsInN1YnN0cmluZyIsImhhcyIsImFkZCIsInNldCIsImdldFRpbWUiLCJ0eXBlIiwidG9VcHBlckNhc2UiLCJ0b0lTT1N0cmluZyIsImVucmljaGVkQ29udGVudCIsIkFycmF5IiwiZnJvbSIsImVudHJpZXMiLCJhIiwiYiIsIm1hcCIsIl8iLCJqb2luIiwiZW5oYW5jZWRQcm9tcHQiLCJpbmNsdWRlcyIsInJldHJpZXMiLCJyZXNwb25zZSIsImZldGNoIiwiaGVhZGVycyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibW9kZWwiLCJtZXNzYWdlcyIsInJvbGUiLCJ0ZW1wZXJhdHVyZSIsIm1heF90b2tlbnMiLCJkYXRhIiwianNvbiIsImJhc2VfcmVzcCIsInN0YXR1c19jb2RlIiwic3RhdHVzX21zZyIsImNob2ljZXMiLCJtZXNzYWdlIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/aiService.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectDB: () => (/* binding */ connectDB)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nlet isConnected = false;\nasync function connectDB() {\n    if (isConnected) {\n        console.log(\"Using existing database connection\");\n        return;\n    }\n    try {\n        console.log(\"MongoDB URI:\", process.env.MONGODB_URI); // Debug log\n        if (!process.env.MONGODB_URI) {\n            throw new Error(\"MONGODB_URI is not defined\");\n        }\n        await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(process.env.MONGODB_URI, {\n            useNewUrlParser: true,\n            useUnifiedTopology: true,\n            retryWrites: true,\n            w: \"majority\",\n            connectTimeoutMS: 10000,\n            socketTimeoutMS: 45000\n        });\n        isConnected = true;\n        console.log(\"New database connection established\");\n    } catch (error) {\n        console.error(\"MongoDB connection error:\", error);\n        throw error;\n    }\n}\n// Handle graceful shutdown\nprocess.on(\"SIGINT\", async ()=>{\n    try {\n        await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.close();\n        console.log(\"MongoDB connection closed through app termination\");\n        process.exit(0);\n    } catch (error) {\n        console.error(\"Error during MongoDB shutdown:\", error);\n        process.exit(1);\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUVoQyxJQUFJQyxjQUFjO0FBRVgsZUFBZUM7SUFDcEIsSUFBSUQsYUFBYTtRQUNmRSxRQUFRQyxHQUFHLENBQUM7UUFDWjtJQUNGO0lBRUEsSUFBSTtRQUNGRCxRQUFRQyxHQUFHLENBQUMsZ0JBQWdCQyxRQUFRQyxHQUFHLENBQUNDLFdBQVcsR0FBRyxZQUFZO1FBRWxFLElBQUksQ0FBQ0YsUUFBUUMsR0FBRyxDQUFDQyxXQUFXLEVBQUU7WUFDNUIsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBRUEsTUFBTVIsdURBQWdCLENBQUNLLFFBQVFDLEdBQUcsQ0FBQ0MsV0FBVyxFQUFFO1lBQzlDRyxpQkFBaUI7WUFDakJDLG9CQUFvQjtZQUNwQkMsYUFBYTtZQUNiQyxHQUFHO1lBQ0hDLGtCQUFrQjtZQUNsQkMsaUJBQWlCO1FBQ25CO1FBRUFkLGNBQWM7UUFDZEUsUUFBUUMsR0FBRyxDQUFDO0lBQ2QsRUFBRSxPQUFPWSxPQUFPO1FBQ2RiLFFBQVFhLEtBQUssQ0FBQyw2QkFBNkJBO1FBQzNDLE1BQU1BO0lBQ1I7QUFDRjtBQUVBLDJCQUEyQjtBQUMzQlgsUUFBUVksRUFBRSxDQUFDLFVBQVU7SUFDbkIsSUFBSTtRQUNGLE1BQU1qQiwwREFBbUIsQ0FBQ21CLEtBQUs7UUFDL0JoQixRQUFRQyxHQUFHLENBQUM7UUFDWkMsUUFBUWUsSUFBSSxDQUFDO0lBQ2YsRUFBRSxPQUFPSixPQUFPO1FBQ2RiLFFBQVFhLEtBQUssQ0FBQyxrQ0FBa0NBO1FBQ2hEWCxRQUFRZSxJQUFJLENBQUM7SUFDZjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FuZGlkYXRlLWRhdGEtcHJvdG90eXBlLy4vc3JjL2xpYi9kYi50cz85ZTRmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5cbmxldCBpc0Nvbm5lY3RlZCA9IGZhbHNlO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29ubmVjdERCKCkge1xuICBpZiAoaXNDb25uZWN0ZWQpIHtcbiAgICBjb25zb2xlLmxvZygnVXNpbmcgZXhpc3RpbmcgZGF0YWJhc2UgY29ubmVjdGlvbicpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ01vbmdvREIgVVJJOicsIHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJKTsgLy8gRGVidWcgbG9nXG4gICAgXG4gICAgaWYgKCFwcm9jZXNzLmVudi5NT05HT0RCX1VSSSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNT05HT0RCX1VSSSBpcyBub3QgZGVmaW5lZCcpO1xuICAgIH1cblxuICAgIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QocHJvY2Vzcy5lbnYuTU9OR09EQl9VUkksIHtcbiAgICAgIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcbiAgICAgIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSxcbiAgICAgIHJldHJ5V3JpdGVzOiB0cnVlLFxuICAgICAgdzogJ21ham9yaXR5JyxcbiAgICAgIGNvbm5lY3RUaW1lb3V0TVM6IDEwMDAwLCAvLyAxMCBzZWNvbmRzXG4gICAgICBzb2NrZXRUaW1lb3V0TVM6IDQ1MDAwLCAgLy8gNDUgc2Vjb25kc1xuICAgIH0gYXMgbW9uZ29vc2UuQ29ubmVjdE9wdGlvbnMpO1xuXG4gICAgaXNDb25uZWN0ZWQgPSB0cnVlO1xuICAgIGNvbnNvbGUubG9nKCdOZXcgZGF0YWJhc2UgY29ubmVjdGlvbiBlc3RhYmxpc2hlZCcpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ01vbmdvREIgY29ubmVjdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gSGFuZGxlIGdyYWNlZnVsIHNodXRkb3duXG5wcm9jZXNzLm9uKCdTSUdJTlQnLCBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdGlvbi5jbG9zZSgpO1xuICAgIGNvbnNvbGUubG9nKCdNb25nb0RCIGNvbm5lY3Rpb24gY2xvc2VkIHRocm91Z2ggYXBwIHRlcm1pbmF0aW9uJyk7XG4gICAgcHJvY2Vzcy5leGl0KDApO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGR1cmluZyBNb25nb0RCIHNodXRkb3duOicsIGVycm9yKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cbn0pOyAiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJpc0Nvbm5lY3RlZCIsImNvbm5lY3REQiIsImNvbnNvbGUiLCJsb2ciLCJwcm9jZXNzIiwiZW52IiwiTU9OR09EQl9VUkkiLCJFcnJvciIsImNvbm5lY3QiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJyZXRyeVdyaXRlcyIsInciLCJjb25uZWN0VGltZW91dE1TIiwic29ja2V0VGltZW91dE1TIiwiZXJyb3IiLCJvbiIsImNvbm5lY3Rpb24iLCJjbG9zZSIsImV4aXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./src/models/ShareableLink.ts":
/*!*************************************!*\
  !*** ./src/models/ShareableLink.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ShareableLink: () => (/* binding */ ShareableLink)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! nanoid */ \"(rsc)/./node_modules/nanoid/index.js\");\n\n\nconst dailyStatSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    date: {\n        type: Date,\n        required: true\n    },\n    chatsInitiated: {\n        type: Number,\n        default: 0\n    },\n    messagesCount: {\n        type: Number,\n        default: 0\n    }\n});\nconst shareableLinkSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    userId: {\n        type: String,\n        required: true\n    },\n    id: {\n        type: String,\n        required: true,\n        unique: true,\n        validate: {\n            validator: function(v) {\n                // Updated regex to allow underscores and both uppercase/lowercase letters\n                return /^[A-Za-z0-9_-]+$/.test(v);\n            },\n            message: \"Invalid link ID format\"\n        }\n    },\n    createdAt: {\n        type: Date,\n        default: Date.now\n    },\n    isActive: {\n        type: Boolean,\n        default: true\n    },\n    dailyStats: [\n        dailyStatSchema\n    ]\n});\n// Add index for faster lookups\nshareableLinkSchema.index({\n    id: 1,\n    userId: 1\n});\n// Add method to generate ID with just name and short unique id\nshareableLinkSchema.statics.generateId = function(firstName = \"\") {\n    const sanitizedName = firstName.toLowerCase().replace(/[^a-z0-9]/g, \"\").slice(0, 10);\n    return `echo-${sanitizedName}-${(0,nanoid__WEBPACK_IMPORTED_MODULE_1__.nanoid)(4)}`;\n};\n// Add method to get public URL\nshareableLinkSchema.methods.getPublicUrl = function() {\n    const env = process.env.VERCEL_ENV || \"development\";\n    const baseUrl = env === \"production\" ? \"https://echoprofile.vercel.app\" : env === \"preview\" ? `https://echoprofile-git-${process.env.VERCEL_GIT_COMMIT_REF}-radiks-projects.vercel.app` : \"http://localhost:3000\";\n    return `${baseUrl}/chat/public/${this.id}`;\n};\n// Update model export with proper typing\nconst ShareableLink = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).ShareableLink || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"ShareableLink\", shareableLinkSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL1NoYXJlYWJsZUxpbmsudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFzRDtBQUN0QjtBQWdCaEMsTUFBTUcsa0JBQWtCLElBQUlGLDRDQUFNQSxDQUFhO0lBQzdDRyxNQUFNO1FBQUVDLE1BQU1DO1FBQU1DLFVBQVU7SUFBSztJQUNuQ0MsZ0JBQWdCO1FBQUVILE1BQU1JO1FBQVFDLFNBQVM7SUFBRTtJQUMzQ0MsZUFBZTtRQUFFTixNQUFNSTtRQUFRQyxTQUFTO0lBQUU7QUFDNUM7QUFFQSxNQUFNRSxzQkFBc0IsSUFBSVgsNENBQU1BLENBQWlCO0lBQ3JEWSxRQUFRO1FBQUVSLE1BQU1TO1FBQVFQLFVBQVU7SUFBSztJQUN2Q1EsSUFBSTtRQUNGVixNQUFNUztRQUNOUCxVQUFVO1FBQ1ZTLFFBQVE7UUFDUkMsVUFBVTtZQUNSQyxXQUFXLFNBQVNDLENBQVM7Z0JBQzNCLDBFQUEwRTtnQkFDMUUsT0FBTyxtQkFBbUJDLElBQUksQ0FBQ0Q7WUFDakM7WUFDQUUsU0FBUztRQUNYO0lBQ0Y7SUFDQUMsV0FBVztRQUFFakIsTUFBTUM7UUFBTUksU0FBU0osS0FBS2lCLEdBQUc7SUFBQztJQUMzQ0MsVUFBVTtRQUFFbkIsTUFBTW9CO1FBQVNmLFNBQVM7SUFBSztJQUN6Q2dCLFlBQVk7UUFBQ3ZCO0tBQWdCO0FBQy9CO0FBRUEsK0JBQStCO0FBQy9CUyxvQkFBb0JlLEtBQUssQ0FBQztJQUFFWixJQUFJO0lBQUdGLFFBQVE7QUFBRTtBQUU3QywrREFBK0Q7QUFDL0RELG9CQUFvQmdCLE9BQU8sQ0FBQ0MsVUFBVSxHQUFHLFNBQVNDLFlBQW9CLEVBQUU7SUFDdEUsTUFBTUMsZ0JBQWdCRCxVQUFVRSxXQUFXLEdBQ3hDQyxPQUFPLENBQUMsY0FBYyxJQUN0QkMsS0FBSyxDQUFDLEdBQUc7SUFDWixPQUFPLENBQUMsS0FBSyxFQUFFSCxjQUFjLENBQUMsRUFBRTdCLDhDQUFNQSxDQUFDLEdBQUcsQ0FBQztBQUM3QztBQUVBLCtCQUErQjtBQUMvQlUsb0JBQW9CdUIsT0FBTyxDQUFDQyxZQUFZLEdBQUc7SUFDekMsTUFBTUMsTUFBTUMsUUFBUUQsR0FBRyxDQUFDRSxVQUFVLElBQUk7SUFDdEMsTUFBTUMsVUFBVUgsUUFBUSxlQUNwQixtQ0FDQUEsUUFBUSxZQUNOLENBQUMsd0JBQXdCLEVBQUVDLFFBQVFELEdBQUcsQ0FBQ0kscUJBQXFCLENBQUMsMkJBQTJCLENBQUMsR0FDekY7SUFFTixPQUFPLENBQUMsRUFBRUQsUUFBUSxhQUFhLEVBQUUsSUFBSSxDQUFDekIsRUFBRSxDQUFDLENBQUM7QUFDNUM7QUFPQSx5Q0FBeUM7QUFDbEMsTUFBTTJCLGdCQUFpQjFDLHdEQUFlLENBQUMwQyxhQUFhLElBQUkxQyxxREFBYyxDQUFxQyxpQkFBaUJZLHFCQUE0QyIsInNvdXJjZXMiOlsid2VicGFjazovL2NhbmRpZGF0ZS1kYXRhLXByb3RvdHlwZS8uL3NyYy9tb2RlbHMvU2hhcmVhYmxlTGluay50cz85MjNmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSwgeyBTY2hlbWEsIERvY3VtZW50IH0gZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IHsgbmFub2lkIH0gZnJvbSAnbmFub2lkJztcblxuZXhwb3J0IGludGVyZmFjZSBJRGFpbHlTdGF0IHtcbiAgZGF0ZTogRGF0ZTtcbiAgY2hhdHNJbml0aWF0ZWQ6IG51bWJlcjtcbiAgbWVzc2FnZXNDb3VudDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTaGFyZWFibGVMaW5rIGV4dGVuZHMgRG9jdW1lbnQge1xuICB1c2VySWQ6IHN0cmluZztcbiAgaWQ6IHN0cmluZztcbiAgY3JlYXRlZEF0OiBEYXRlO1xuICBpc0FjdGl2ZTogYm9vbGVhbjtcbiAgZGFpbHlTdGF0czogSURhaWx5U3RhdFtdO1xufVxuXG5jb25zdCBkYWlseVN0YXRTY2hlbWEgPSBuZXcgU2NoZW1hPElEYWlseVN0YXQ+KHtcbiAgZGF0ZTogeyB0eXBlOiBEYXRlLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBjaGF0c0luaXRpYXRlZDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcbiAgbWVzc2FnZXNDb3VudDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcbn0pO1xuXG5jb25zdCBzaGFyZWFibGVMaW5rU2NoZW1hID0gbmV3IFNjaGVtYTxJU2hhcmVhYmxlTGluaz4oe1xuICB1c2VySWQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBpZDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB1bmlxdWU6IHRydWUsXG4gICAgdmFsaWRhdGU6IHtcbiAgICAgIHZhbGlkYXRvcjogZnVuY3Rpb24odjogc3RyaW5nKSB7XG4gICAgICAgIC8vIFVwZGF0ZWQgcmVnZXggdG8gYWxsb3cgdW5kZXJzY29yZXMgYW5kIGJvdGggdXBwZXJjYXNlL2xvd2VyY2FzZSBsZXR0ZXJzXG4gICAgICAgIHJldHVybiAvXltBLVphLXowLTlfLV0rJC8udGVzdCh2KTtcbiAgICAgIH0sXG4gICAgICBtZXNzYWdlOiAnSW52YWxpZCBsaW5rIElEIGZvcm1hdCdcbiAgICB9XG4gIH0sXG4gIGNyZWF0ZWRBdDogeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdyB9LFxuICBpc0FjdGl2ZTogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiB0cnVlIH0sXG4gIGRhaWx5U3RhdHM6IFtkYWlseVN0YXRTY2hlbWFdLFxufSk7XG5cbi8vIEFkZCBpbmRleCBmb3IgZmFzdGVyIGxvb2t1cHNcbnNoYXJlYWJsZUxpbmtTY2hlbWEuaW5kZXgoeyBpZDogMSwgdXNlcklkOiAxIH0pO1xuXG4vLyBBZGQgbWV0aG9kIHRvIGdlbmVyYXRlIElEIHdpdGgganVzdCBuYW1lIGFuZCBzaG9ydCB1bmlxdWUgaWRcbnNoYXJlYWJsZUxpbmtTY2hlbWEuc3RhdGljcy5nZW5lcmF0ZUlkID0gZnVuY3Rpb24oZmlyc3ROYW1lOiBzdHJpbmcgPSAnJykge1xuICBjb25zdCBzYW5pdGl6ZWROYW1lID0gZmlyc3ROYW1lLnRvTG93ZXJDYXNlKClcbiAgICAucmVwbGFjZSgvW15hLXowLTldL2csICcnKVxuICAgIC5zbGljZSgwLCAxMCk7XG4gIHJldHVybiBgZWNoby0ke3Nhbml0aXplZE5hbWV9LSR7bmFub2lkKDQpfWA7XG59O1xuXG4vLyBBZGQgbWV0aG9kIHRvIGdldCBwdWJsaWMgVVJMXG5zaGFyZWFibGVMaW5rU2NoZW1hLm1ldGhvZHMuZ2V0UHVibGljVXJsID0gZnVuY3Rpb24oKSB7XG4gIGNvbnN0IGVudiA9IHByb2Nlc3MuZW52LlZFUkNFTF9FTlYgfHwgJ2RldmVsb3BtZW50JztcbiAgY29uc3QgYmFzZVVybCA9IGVudiA9PT0gJ3Byb2R1Y3Rpb24nIFxuICAgID8gJ2h0dHBzOi8vZWNob3Byb2ZpbGUudmVyY2VsLmFwcCdcbiAgICA6IGVudiA9PT0gJ3ByZXZpZXcnXG4gICAgICA/IGBodHRwczovL2VjaG9wcm9maWxlLWdpdC0ke3Byb2Nlc3MuZW52LlZFUkNFTF9HSVRfQ09NTUlUX1JFRn0tcmFkaWtzLXByb2plY3RzLnZlcmNlbC5hcHBgXG4gICAgICA6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnO1xuICAgICAgXG4gIHJldHVybiBgJHtiYXNlVXJsfS9jaGF0L3B1YmxpYy8ke3RoaXMuaWR9YDtcbn07XG5cbi8vIEFkZCBzdGF0aWMgbWV0aG9kIHRvIGludGVyZmFjZVxuaW50ZXJmYWNlIFNoYXJlYWJsZUxpbmtNb2RlbCBleHRlbmRzIG1vbmdvb3NlLk1vZGVsPElTaGFyZWFibGVMaW5rPiB7XG4gIGdlbmVyYXRlSWQoZmlyc3ROYW1lPzogc3RyaW5nKTogc3RyaW5nO1xufVxuXG4vLyBVcGRhdGUgbW9kZWwgZXhwb3J0IHdpdGggcHJvcGVyIHR5cGluZ1xuZXhwb3J0IGNvbnN0IFNoYXJlYWJsZUxpbmsgPSAobW9uZ29vc2UubW9kZWxzLlNoYXJlYWJsZUxpbmsgfHwgbW9uZ29vc2UubW9kZWw8SVNoYXJlYWJsZUxpbmssIFNoYXJlYWJsZUxpbmtNb2RlbD4oJ1NoYXJlYWJsZUxpbmsnLCBzaGFyZWFibGVMaW5rU2NoZW1hKSkgYXMgU2hhcmVhYmxlTGlua01vZGVsO1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiU2NoZW1hIiwibmFub2lkIiwiZGFpbHlTdGF0U2NoZW1hIiwiZGF0ZSIsInR5cGUiLCJEYXRlIiwicmVxdWlyZWQiLCJjaGF0c0luaXRpYXRlZCIsIk51bWJlciIsImRlZmF1bHQiLCJtZXNzYWdlc0NvdW50Iiwic2hhcmVhYmxlTGlua1NjaGVtYSIsInVzZXJJZCIsIlN0cmluZyIsImlkIiwidW5pcXVlIiwidmFsaWRhdGUiLCJ2YWxpZGF0b3IiLCJ2IiwidGVzdCIsIm1lc3NhZ2UiLCJjcmVhdGVkQXQiLCJub3ciLCJpc0FjdGl2ZSIsIkJvb2xlYW4iLCJkYWlseVN0YXRzIiwiaW5kZXgiLCJzdGF0aWNzIiwiZ2VuZXJhdGVJZCIsImZpcnN0TmFtZSIsInNhbml0aXplZE5hbWUiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJzbGljZSIsIm1ldGhvZHMiLCJnZXRQdWJsaWNVcmwiLCJlbnYiLCJwcm9jZXNzIiwiVkVSQ0VMX0VOViIsImJhc2VVcmwiLCJWRVJDRUxfR0lUX0NPTU1JVF9SRUYiLCJTaGFyZWFibGVMaW5rIiwibW9kZWxzIiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/models/ShareableLink.ts\n");

/***/ }),

/***/ "(rsc)/./src/models/content.ts":
/*!*******************************!*\
  !*** ./src/models/content.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Content: () => (/* binding */ Content)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst contentSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    userId: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n        ref: \"User\",\n        required: true\n    },\n    type: {\n        type: String,\n        enum: [\n            \"file\",\n            \"text\"\n        ],\n        required: true\n    },\n    content: {\n        type: String,\n        required: true\n    },\n    fileName: String,\n    fileSize: Number,\n    mimeType: String,\n    createdAt: {\n        type: Date,\n        default: Date.now\n    }\n});\nconst Content = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Content || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Content\", contentSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL2NvbnRlbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXNEO0FBWXRELE1BQU1FLGdCQUFnQixJQUFJRCw0Q0FBTUEsQ0FBVztJQUN6Q0UsUUFBUTtRQUNOQyxNQUFNSCw0Q0FBTUEsQ0FBQ0ksS0FBSyxDQUFDQyxRQUFRO1FBQzNCQyxLQUFLO1FBQ0xDLFVBQVU7SUFDWjtJQUNBSixNQUFNO1FBQ0pBLE1BQU1LO1FBQ05DLE1BQU07WUFBQztZQUFRO1NBQU87UUFDdEJGLFVBQVU7SUFDWjtJQUNBRyxTQUFTO1FBQ1BQLE1BQU1LO1FBQ05ELFVBQVU7SUFDWjtJQUNBSSxVQUFVSDtJQUNWSSxVQUFVQztJQUNWQyxVQUFVTjtJQUNWTyxXQUFXO1FBQ1RaLE1BQU1hO1FBQ05DLFNBQVNELEtBQUtFLEdBQUc7SUFDbkI7QUFDRjtBQUVPLE1BQU1DLFVBQVVwQix3REFBZSxDQUFDb0IsT0FBTyxJQUFJcEIscURBQWMsQ0FBVyxXQUFXRSxlQUFlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FuZGlkYXRlLWRhdGEtcHJvdG90eXBlLy4vc3JjL21vZGVscy9jb250ZW50LnRzPzYzYjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlLCB7IERvY3VtZW50LCBTY2hlbWEgfSBmcm9tICdtb25nb29zZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbnRlbnQgZXh0ZW5kcyBEb2N1bWVudCB7XG4gIHVzZXJJZDogbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQ7XG4gIHR5cGU6ICdmaWxlJyB8ICd0ZXh0JztcbiAgY29udGVudDogc3RyaW5nO1xuICBmaWxlTmFtZT86IHN0cmluZztcbiAgZmlsZVNpemU/OiBudW1iZXI7XG4gIG1pbWVUeXBlPzogc3RyaW5nO1xuICBjcmVhdGVkQXQ6IERhdGU7XG59XG5cbmNvbnN0IGNvbnRlbnRTY2hlbWEgPSBuZXcgU2NoZW1hPElDb250ZW50Pih7XG4gIHVzZXJJZDoge1xuICAgIHR5cGU6IFNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICByZWY6ICdVc2VyJyxcbiAgICByZXF1aXJlZDogdHJ1ZVxuICB9LFxuICB0eXBlOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGVudW06IFsnZmlsZScsICd0ZXh0J10sXG4gICAgcmVxdWlyZWQ6IHRydWVcbiAgfSxcbiAgY29udGVudDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZVxuICB9LFxuICBmaWxlTmFtZTogU3RyaW5nLFxuICBmaWxlU2l6ZTogTnVtYmVyLFxuICBtaW1lVHlwZTogU3RyaW5nLFxuICBjcmVhdGVkQXQ6IHtcbiAgICB0eXBlOiBEYXRlLFxuICAgIGRlZmF1bHQ6IERhdGUubm93XG4gIH1cbn0pO1xuXG5leHBvcnQgY29uc3QgQ29udGVudCA9IG1vbmdvb3NlLm1vZGVscy5Db250ZW50IHx8IG1vbmdvb3NlLm1vZGVsPElDb250ZW50PignQ29udGVudCcsIGNvbnRlbnRTY2hlbWEpOyAiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJTY2hlbWEiLCJjb250ZW50U2NoZW1hIiwidXNlcklkIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJyZXF1aXJlZCIsIlN0cmluZyIsImVudW0iLCJjb250ZW50IiwiZmlsZU5hbWUiLCJmaWxlU2l6ZSIsIk51bWJlciIsIm1pbWVUeXBlIiwiY3JlYXRlZEF0IiwiRGF0ZSIsImRlZmF1bHQiLCJub3ciLCJDb250ZW50IiwibW9kZWxzIiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/models/content.ts\n");

/***/ }),

/***/ "(rsc)/./src/utils/handleErrors.ts":
/*!***********************************!*\
  !*** ./src/utils/handleErrors.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handleError: () => (/* binding */ handleError)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n// src/utils/handleErrors.ts\n\n\nfunction handleError(error, defaultMessage = \"Internal Server Error\") {\n    console.error(\"Error:\", error);\n    if (error instanceof zod__WEBPACK_IMPORTED_MODULE_1__.ZodError) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.errors\n        }, {\n            status: 400\n        });\n    }\n    if (error instanceof Error) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: defaultMessage\n    }, {\n        status: 500\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdXRpbHMvaGFuZGxlRXJyb3JzLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLDRCQUE0QjtBQUNjO0FBQ1o7QUFFdkIsU0FBU0UsWUFBWUMsS0FBYyxFQUFFQyxpQkFBaUIsdUJBQXVCO0lBQ2xGQyxRQUFRRixLQUFLLENBQUMsVUFBVUE7SUFFeEIsSUFBSUEsaUJBQWlCRix5Q0FBUUEsRUFBRTtRQUM3QixPQUFPRCxxREFBWUEsQ0FBQ00sSUFBSSxDQUN0QjtZQUFFSCxPQUFPQSxNQUFNSSxNQUFNO1FBQUMsR0FDdEI7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0lBRUEsSUFBSUwsaUJBQWlCTSxPQUFPO1FBQzFCLE9BQU9ULHFEQUFZQSxDQUFDTSxJQUFJLENBQ3RCO1lBQUVILE9BQU9BLE1BQU1PLE9BQU87UUFBQyxHQUN2QjtZQUFFRixRQUFRO1FBQUk7SUFFbEI7SUFFQSxPQUFPUixxREFBWUEsQ0FBQ00sSUFBSSxDQUN0QjtRQUFFSCxPQUFPQztJQUFlLEdBQ3hCO1FBQUVJLFFBQVE7SUFBSTtBQUVsQiIsInNvdXJjZXMiOlsid2VicGFjazovL2NhbmRpZGF0ZS1kYXRhLXByb3RvdHlwZS8uL3NyYy91dGlscy9oYW5kbGVFcnJvcnMudHM/ODIwZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvaGFuZGxlRXJyb3JzLnRzXG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IFpvZEVycm9yIH0gZnJvbSAnem9kJ1xuXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlRXJyb3IoZXJyb3I6IHVua25vd24sIGRlZmF1bHRNZXNzYWdlID0gJ0ludGVybmFsIFNlcnZlciBFcnJvcicpIHtcbiAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyb3IpXG5cbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgWm9kRXJyb3IpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiBlcnJvci5lcnJvcnMgfSxcbiAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgIClcbiAgfVxuXG4gIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgIHsgZXJyb3I6IGRlZmF1bHRNZXNzYWdlIH0sXG4gICAgeyBzdGF0dXM6IDUwMCB9XG4gIClcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiWm9kRXJyb3IiLCJoYW5kbGVFcnJvciIsImVycm9yIiwiZGVmYXVsdE1lc3NhZ2UiLCJjb25zb2xlIiwianNvbiIsImVycm9ycyIsInN0YXR1cyIsIkVycm9yIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/utils/handleErrors.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod","vendor-chunks/nanoid"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Fpublic%2F%5BlinkId%5D%2Froute&page=%2Fapi%2Fchat%2Fpublic%2F%5BlinkId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Fpublic%2F%5BlinkId%5D%2Froute.ts&appDir=%2Fhome%2Fverdy%2Fcandidate-data-prototype%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fverdy%2Fcandidate-data-prototype&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();